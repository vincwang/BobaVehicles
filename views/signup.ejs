<!DOCTYPE html>
<html>
<head>
  <title>Sign Up</title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
</head>
<script
src="https://code.jquery.com/jquery-1.12.4.min.js"
integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
crossorigin="anonymous"></script>
<body>
 <% include header.ejs%>

 <form id = "signupform" class="form-horizontal" method="POST">
 <fieldset>
 <!-- Form Name -->
 <br>
 <h2>Sign up</h2>
 <div class="form-group">
   <label class="col-md-4 control-label" for="type">Type:</label>
   <div class="col-md-4">
     <label class="radio-inline" for="radios-0">
       <input type="radio" name="type" value="buyer" checked="checked">
       Buyer
     </label>
     <label class="radio-inline" for="radios-1">
       <input type="radio" name="type" value="supplier">
       Supplier
     </label>
   </div>
 </div>

 <!-- Text input-->
<div class="form-group">
  <label class="col-md-4 control-label" for="textinput">Name:</label>
  <div class="col-md-4">
  <input name="username" type="text" placeholder="Barack Obama" class="form-control input-md" required/>
  </div>
</div>

<div class="form-group">
  <label class="col-md-4 control-label" for="textinput">Email:</label>
  <div class="col-md-4">
  <input name="email" type="text" placeholder="example@example.com" class="form-control input-md" required/>
  </div>
</div>

<div class="form-group">
  <label class="col-md-4 control-label" for="textinput">Password:</label>
  <div class="col-md-4">
  <input name="password" type="password" placeholder="Enter your password here ..." class="form-control input-md" required/>
  </div>
</div>

<!-- Text input-->
<div class="form-group">
  <label class="col-md-4 control-label" for="textinput">Address:</label>
  <div class="col-md-4">
  <input name="address" type="text" placeholder="1600 Pennsylvania Ave NW, Washington, DC 20500" class="form-control input-md" />
  </div>
</div>

<!-- Text input-->
<div class="form-group">
  <label class="col-md-4 control-label" for="textinput">Bank Account:</label>
  <div class="col-md-4">
  <input name="bank" type="text" placeholder="010101" pattern="[0-9]{1,11}"   maxlength="8" class="form-control input-md" required/>
  </div>
</div>

 <!-- Button -->
 <div class="form-group">
   <label class="col-md-4 control-label" for="singlebutton"></label>
   <div class="col-md-4">
     <!-- <button type="submit" class="btn btn-default">Submit</button> -->
     <button name="singlebutton" class="btn btn-primary">Register</button>
   </div>
 </div>

 </fieldset>
 </form>

 <script>
   $("#signupform").submit(function(e) {
     var url = "signup/register"; // the script where you handle the form input.
     $.ajax({
            type: "POST",
            url: url,
            data: $("#signupform").serialize(), // serializes the form's elements.
            success: function(data)
            {
              if (!data.startsWith("success")) {
                alert(data);
              } else {
                window.location.replace('/login');
              }
            }
          });

     e.preventDefault(); // avoid to execute the actual submit of the form.
   });
 </script>

</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</html>
